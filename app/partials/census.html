<div ng-controller="censusController">

    <div  ng-if='okey' style="margin-left:-15px;">
        <census ui-if='okey' okey='okey' site='site' map='map' onsave='cancel()'  oncancel='cancel()' classindex='classindex'></census>
    </div>

    <div ng-if='!okey'>

        <div style="margin:10px" class="panel panel-warning">
            <div class="panel-heading">
                <i class="fa fa-info-circle"> </i> Recensement
            </div>
            <div class="panel-body">Veuillez sélectionner l'objet à recenser</div>
        </div>

        <li ng-repeat="(modelOkey, model) in site.metamodel">
            <a ng-click='startCensus(modelOkey)' ng-if="model.is_census">
                <img ng-if= 'site.symbology[modelOkey+classindex]'
                    ng-src='{{site.symbology[modelOkey+classindex].style.symbol.icon}}' alt="" />
                <img ng-if='!site.symbology[modelOkey+classindex]'
                    ng-src='{{site.symbology[site.dependancies[modelOkey]+classindex].style.symbol.icon}}' alt="" />
                <img ng-if='!site.symbology[site.dependancies[modelOkey]+classindex]'
                    ng-src='{{site.symbology[site.dependancies[site.symbology[site.dependancies[modelOkey]+classindex]]+classindex].style.symbol.icon}}' alt="" />
                {{model.label}}
            </a>
        </li>
    </div>

</div>
