<div ng-controller="ConsultationController as consultationController" class="consultation-panel" ng-class="{open : consultationController.isOpen}">
    <div class="toggleConsultationPanelButton" ng-show="consultationController.groups" ng-click="consultationController.toggleConsultationPanel()">
        <span class="fa fa-info"></span>
    </div>
    <div class="consultation-content">
        <div ng-if="consultationController.loading" class="consultationLoadingBlock">
            <i class="fa fa-refresh fa-spin"></i>
        </div>
        <div ng-repeat="priority in consultationController.groups" ng-if="!consultationController.loading">
            <div class="panel-group" ng-repeat="(okey, assets) in priority">
                <h4 class="family-title">{{::site.metamodel[assets[0].okey].label}}</h4>
                <div class="panel consultation-group">
                    <asset-consultation asset='::asset' ng-repeat='asset in assets' />
                </div>
            </div>
        </div>
        <!-- VEOLIA (Commenté pour alléger le DOM) -->
        <!-- <div style="margin-top: 25px;" ng-show="map_target && consultationController.coordinates">
            <button class="btn btn-primary btn-block" ng-click="openLocatedReport(coordinates.lat, coordinates.lng)">
                <i18n>_CONSULTATION_REPORT_ON_POSITION</i18n>
            </button>
        </div> -->
    </div>
</div>
